<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="MembershipDAO">
 	<resultMap type="myMembership" id="myMembershipResult">
 		<result property="membership_point" column="MEMBERSHIP_POINT"/>
 		
 		<association property="membership" javaType="Membership" resultMap="MembershipResult"/>
 		
 		<association property="member" javaType="Member" resultMap="MemberResult">
 		</association>
 		
 	</resultMap>
 	
 	<resultMap type="Membership" id="MembershipResult">
 		<id property="membership_code" column="MEMBERSHIP_CODE"/>
 		<result property="membership_grade" column="MEMBERSHIP_GRADE"/>
 	</resultMap>
 	
 	<resultMap type="Member" id="MemberResult">
 		<id property="member_id" column="MEMBER_ID"/>
	 		<result property="member_seq" column="MEMBER_SEQ"/>
	 		<result property="member_id" column="MEMBER_ID"/>
	 		<result property="member_pw" column="MEMBER_PW"/>
	 		<result property="member_name" column="MEMBER_NAME"/>
	 		<result property="member_contact" column="MEMBER_CONTACT"/>
	 		<result property="member_email" column="MEMBER_EMAIL"/>
	 		<result property="member_address" column="MEMBER_ADDRESS"/>
	 		<collection property="authList" resultMap="AuthResult">
	 		
	 		</collection>
 	</resultMap>
 	
 	<resultMap type="Auth" id="AuthResult">
 		<result property="member_id" column="MEMBER_ID"/>
 		<result property="auth" column="AUTH"/>
 	</resultMap>
 	
 	
 	
 	<insert id="insertMembership" parameterType="Member">
 		INSERT INTO my_membership VALUES(1, #{member_id}, 0)
 	</insert>
 	
 	<select id="getMembership" parameterType="String" resultMap="myMembershipResult">
 		select myMembership.member_id, membership.membership_grade, myMembership.membership_point from my_membership myMembership, cafehi_membership membership 
		where myMembership.membership_code = membership.membership_code and myMembership.member_id = #{member_id} 
 	</select>
 </mapper>